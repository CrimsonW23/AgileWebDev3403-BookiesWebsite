{% extends "base.html" %}

{% block content %}
<!-- guaranteed‑to‑load link, even if base.html lacks a head/extra_css block -->
<link rel="stylesheet"
      href="{{ url_for('static', filename='css/search.css') }}"
      referrerpolicy="no-referrer" />

<section class="search-results-wrapper">
  <h1>Search Results{% if query %} for “{{ query }}”{% endif %}</h1>

  {% if users %}
    <div class="results-grid">
      {% for u in users %}
        <a class="result-card"
           href="{{ url_for('profile', username=u.username) }}">
          <div class="card-avatar"></div>

          {# highlight matched substring #}
          <span>
            {{ u.username|replace(
              query,
              '<span class="highlight">' ~ query ~ '</span>'
            )|safe }}
          </span>
        </a>
      {% endfor %}
    </div>
  {% else %}
    <p class="no-results">
      No users found. Try another search term.
    </p>
  {% endif %}
</section>
{% endblock %}
